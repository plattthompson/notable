(this.webpackJsonpnoteworthy=this.webpackJsonpnoteworthy||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n(5),o=n.n(r),c=(n(14),n(3)),s=n(2),i=n(6),l=n(7),u=n(9),d=n(8),h=(n(15),n(0)),j=function(){return Object(h.jsx)("div",{className:"header",children:Object(h.jsx)("h1",{children:"NoteWorthy"})})},f=function(t){return Object(h.jsx)("div",{className:"add",children:Object(h.jsx)("i",{onClick:t.addNote,className:"fas fa-plus-circle fa-lg icon","aria-label":"Add"})})},N=function(t){return Object(h.jsx)("div",{className:"delete",children:Object(h.jsx)("i",{onClick:t.deleteNote,className:"fas fa-trash-alt fa-lg icon","aria-label":"Delete"})})},v=function(t){return Object(h.jsx)("div",{className:"save",children:Object(h.jsx)("i",{onClick:t.saveChanges,className:"far fa-save fa-lg icon","aria-label":"Save"})})},b=function(t){return Object(h.jsx)("div",{className:"menu",children:Object(h.jsx)("ul",{className:"note-titles",children:t.renderTitles})})},p=function(t){return Object(h.jsx)("div",{className:"note-div",children:Object(h.jsx)("textarea",{value:t.renderNote,onChange:function(e){return t.saveTextArea(e)},className:"note-box",placeholder:"Create your note here"})})},x=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={currentNote:{id:null,title:"",text:""},allNotes:{}},t.renderTitles=function(){return Object.values(t.state.allNotes).map((function(e){return Object(h.jsx)("li",{onClick:function(){return t.selectNote(e.id)},children:Object(h.jsx)("input",{onChange:function(e){return t.saveTitle(e)},className:"title-box",defaultValue:e.title,id:e.id})},e.id.toString())}))},t.selectNote=function(e){var n=t.state.allNotes[e];t.setState({currentNote:n})},t.renderNote=function(){return t.state.currentNote.text},t.saveTextArea=function(e){if(t.state.currentNote.id){var n=t.state.currentNote.id,a=t.state.currentNote.title,r=e.target.value;t.setState((function(t){return{currentNote:{id:n,title:a,text:r},allNotes:Object(s.a)(Object(s.a)({},t.allNotes),{},Object(c.a)({},n,{id:n,title:a,text:r}))}}))}else t.addNote()},t.saveTitle=function(e){var n=t.state.currentNote.id,a=e.target.value,r=t.state.currentNote.text;t.setState((function(t){return{currentNote:{id:n,title:a,text:r},allNotes:Object(s.a)(Object(s.a)({},t.allNotes),{},Object(c.a)({},n,{id:n,title:a,text:r}))}}))},t.addNote=function(){var e=Object(s.a)({},t.state.allNotes),n=Math.floor(1e4*Math.random()),a={id:n,title:"",text:""};e[n]=a,t.setState({currentNote:{id:n,title:"",text:""},allNotes:e})},t.saveChanges=function(){var e=Object.values(Object(s.a)({},t.state.allNotes)),n=JSON.stringify(e).replace(/"id":/g,"id:").replace(/"title":/g,"title:").replace(/"text":/g,"text:"),a="mutation {\n\t\t\t\t\t  insert_notes(\n\t\t\t\t\t\tobjects: \n\t\t\t\t\t\t  ".concat(n,"\n\t\t\t\t\t\t,\n\t\t\t\t\t\ton_conflict: {\n\t\t\t\t\t\t  constraint: notes_pkey\n\t\t\t\t\t\t  update_columns: [title, text]\n\t\t\t\t\t\t}\n\t\t\t\t\t  ) {\n\t\t\t\t\t\treturning {\n\t\t\t\t\t\t  id\n\t\t\t\t\t\t  title\n\t\t\t\t\t\t  text\n\t\t\t\t\t\t}\n\t\t\t\t\t  }\n\t\t\t\t\t}");fetch("https://noteworthy-graphql.herokuapp.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})}).then((function(t){return t.json()})).then((function(t){return console.log(t)})).catch((function(t){return console.error(t)}))},t.deleteNote=function(){var e=Object(s.a)({},t.state.allNotes),n=t.state.currentNote.id;delete e[n],t.setState({currentNote:{id:null,title:"",text:""},allNotes:e}),fetch("https://noteworthy-graphql.herokuapp.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"mutation {\n\t\t\t\t\t\t\tdelete_notes(where: {id: {_eq: ".concat(n,"}}) {\n\t\t\t\t\t\t\t\taffected_rows\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}")})}).then((function(t){return t.json()})).then((function(t){return console.log(t)})).catch((function(t){return console.error(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("https://noteworthy-graphql.herokuapp.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{ notes { id title text } }"})}).then((function(t){return t.json()})).then((function(t){return t.data.notes})).then((function(t){return t.reduce((function(t,e){return t[e.id]=e,t}),{})})).then((function(e){return t.setState({allNotes:e})})).catch((function(t){return console.error(t)})),this.autoSave=setInterval(this.saveChanges,12e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.autoSave)}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(j,{}),Object(h.jsxs)("div",{className:"app-container background",children:[Object(h.jsx)(f,{addNote:this.addNote}),Object(h.jsx)(v,{saveChanges:this.saveChanges}),Object(h.jsx)(N,{deleteNote:this.deleteNote}),Object(h.jsx)(b,{renderTitles:this.renderTitles(),selectNote:this.selectNote,saveTitle:this.saveTitle}),Object(h.jsx)(p,{renderNote:this.renderNote(),saveTextArea:this.saveTextArea})]})]})}}]),n}(a.Component);o.a.render(Object(h.jsx)(x,{}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.2a14f24f.chunk.js.map