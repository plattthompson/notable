(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,n){t.exports=n(18)},16:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(4),l=n.n(o),c=(n(16),n(2)),i=n(1),s=n(5),u=n(6),d=n(8),h=n(7),f=n(9),N=(n(17),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"NoteWorthy"))}),m=function(t){return r.a.createElement("div",{className:"add"},r.a.createElement("i",{onClick:t.addNote,className:"fas fa-plus-circle fa-lg icon","aria-label":"Add"}))},v=function(t){return r.a.createElement("div",{className:"delete"},r.a.createElement("i",{onClick:t.deleteNote,className:"fas fa-trash-alt fa-lg icon","aria-label":"Delete"}))},p=function(t){return r.a.createElement("div",{className:"save"},r.a.createElement("i",{onClick:t.saveChanges,className:"far fa-save fa-lg icon","aria-label":"Save"}))},g=function(t){return r.a.createElement("div",{className:"menu"},r.a.createElement("ul",{className:"note-titles"},t.renderTitles))},b=function(t){return r.a.createElement("div",{className:"note-div"},r.a.createElement("textarea",{value:t.renderNote,onChange:function(e){return t.saveTextArea(e)},className:"note-box",placeholder:"Create your note here"}))},y=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(d.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(o)))).state={currentNote:{id:null,title:"",text:""},allNotes:{}},n.renderTitles=function(){return Object.values(n.state.allNotes).map(function(t){return r.a.createElement("li",{onClick:function(){return n.selectNote(t.id)},key:t.id.toString()},r.a.createElement("input",{onChange:function(t){return n.saveTitle(t)},className:"title-box",defaultValue:t.title,id:t.id}))})},n.selectNote=function(t){var e=n.state.allNotes[t];n.setState({currentNote:e})},n.renderNote=function(){return n.state.currentNote.text},n.saveTextArea=function(t){if(n.state.currentNote.id){var e=n.state.currentNote.id,a=n.state.currentNote.title,r=t.target.value;n.setState(function(t){return{currentNote:{id:e,title:a,text:r},allNotes:Object(i.a)({},t.allNotes,Object(c.a)({},e,{id:e,title:a,text:r}))}})}else n.addNote()},n.saveTitle=function(t){var e=n.state.currentNote.id,a=t.target.value,r=n.state.currentNote.text;n.setState(function(t){return{currentNote:{id:e,title:a,text:r},allNotes:Object(i.a)({},t.allNotes,Object(c.a)({},e,{id:e,title:a,text:r}))}})},n.addNote=function(){var t=Object(i.a)({},n.state.allNotes),e=Date.now(),a={id:e,title:"",text:""};t[e]=a,n.setState({currentNote:{id:e,title:"",text:""},allNotes:t})},n.saveChanges=function(){var t=Object.values(Object(i.a)({},n.state.allNotes)),e=JSON.stringify(t).replace(/"id":/g,"id:").replace(/"title":/g,"title:").replace(/"text":/g,"text:"),a="mutation {\n\t\t\t\t\t  insert_notes(\n\t\t\t\t\t\tobjects: \n\t\t\t\t\t\t  ".concat(e,"\n\t\t\t\t\t\t,\n\t\t\t\t\t\ton_conflict: {\n\t\t\t\t\t\t  constraint: notes_pkey\n\t\t\t\t\t\t  update_columns: [title, text]\n\t\t\t\t\t\t}\n\t\t\t\t\t  ) {\n\t\t\t\t\t\treturning {\n\t\t\t\t\t\t  id\n\t\t\t\t\t\t  title\n\t\t\t\t\t\t  text\n\t\t\t\t\t\t}\n\t\t\t\t\t  }\n\t\t\t\t\t}");fetch("https://noteworthy-graphql.herokuapp.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})}).then(function(t){return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.error(t)})},n.deleteNote=function(){var t=Object(i.a)({},n.state.allNotes),e=n.state.currentNote.id;delete t[e],n.setState({currentNote:{id:null,title:"",text:""},allNotes:t}),fetch("https://noteworthy-graphql.herokuapp.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"mutation {\n\t\t\t\t\t\t\tdelete_notes(where: {id: {_eq: ".concat(e,"}}) {\n\t\t\t\t\t\t\t\taffected_rows\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}")})}).then(function(t){return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.error(t)})},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;fetch("https://noteworthy-graphql.herokuapp.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{ notes { id title text } }"})}).then(function(t){return t.json()}).then(function(t){return t.data.notes}).then(function(t){return t.reduce(function(t,e){return t[e.id]=e,t},{})}).then(function(e){return t.setState({allNotes:e})}).catch(function(t){return console.error(t)}),this.autoSave=setInterval(this.saveChanges,12e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.autoSave)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement("div",{className:"app-container background"},r.a.createElement(m,{addNote:this.addNote}),r.a.createElement(p,{saveChanges:this.saveChanges}),r.a.createElement(v,{deleteNote:this.deleteNote}),r.a.createElement(g,{renderTitles:this.renderTitles(),selectNote:this.selectNote,saveTitle:this.saveTitle}),r.a.createElement(b,{renderNote:this.renderNote(),saveTextArea:this.saveTextArea})))}}]),e}(a.Component);l.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.905065f8.chunk.js.map